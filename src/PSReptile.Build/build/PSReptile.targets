<Project>
    <UsingTask TaskName="GenerateHelp" AssemblyFile="$(MSBuildThisFileDirectory)PSReptile.Build.dll" />

    <Target Name="BuildPSHelp"
        AfterTargets="Build"

        Inputs="%(PSModuleHelp.SourceModule)"
        Outputs="@(PSModuleHelp)"
        
        Condition=" '$(BuildPSHelp)' == 'true' '"
    >
        <GenerateHelp
            ModuleAssembly="%(PSModuleHelp.SourceModule)"
            HelpFile="@(PSModuleHelp)"
        />

        <ItemGroup Condition=" '$(PublishPSHelp)' == 'true' ">
            <ContentWithTargetPath Include="@(PSModuleHelp)"
                CopyToOutputDirectory="PreserveNewest"
                TargetPath="%(FileName)%(Extension)"
            />
        </ItemGroup>
    </Target>
</Project>
